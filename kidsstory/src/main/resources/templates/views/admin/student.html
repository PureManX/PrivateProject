<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	  layout:decorator="layout/adminLayout">
<head>
	<style>
		.popover {
			min-width: 500px;
		}

	</style>
</head>
<body class="hold-transition skin-red-light sidebar-mini">
	<div class="wrapper">
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper" layout:fragment="content">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<h1>
					유치원생 관리
					<small>Optional description</small>
				</h1>
				<ol class="breadcrumb">
					<li><a href="#"><i class="fa fa-dashboard"></i> Level</a></li>
					<li class="active">Here</li>
				</ol>
			</section>

			<!-- Main content -->
			<section class="content">
				<div class="box box-solid box-default">

					<div class="box-header with-border">
						<h3 class="box-title">유치원생 등록</h3>
					</div>
					<!-- /.box-header -->
					<!-- form start -->
					<form class="form-horizontal">
						<div class="box-body">
							<div class="form-group">
								<label class="col-sm-2 control-label">이름</label>

								<div class="col-sm-10">
									<input type="text" class="form-control" placeholder="이름" />
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-2 control-label">학부형</label>

								<div class="col-sm-10">
									<div class="input-group" id="test1">
										<input type="text" name="q" class="form-control" placeholder="학부형" />
										<span class="input-group-btn" id="search-btn-parent-group">
											<button type="button" name="search" id="search-btn-parent" class="btn btn-flat">
												<i class="fa fa-search"></i>
											</button>
						  				</span>
									</div>

								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-2 control-label">학급</label>
								<div class="col-sm-10">
									<select class="form-control">
										<option selected="selected">개나리</option>
										<option>진달래</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label for="inputPassword3" class="col-sm-2 control-label">Password</label>

								<div class="col-sm-10">
									<input type="password" class="form-control" id="inputPassword3" placeholder="Password" />
								</div>
							</div>
							<div class="form-group">
								<div class="col-sm-offset-2 col-sm-10">
									<div class="checkbox">
										<label>
											<input type="checkbox" /> Remember me
										</label>
									</div>
								</div>
							</div>
						</div>
						<!-- /.box-body -->
						<div class="box-footer">
							<button type="submit" class="btn btn-default">취소</button>
							<button type="submit" class="btn btn-info pull-right">저장</button>
						</div>
						<!-- /.box-footer -->
					</form>

				</div>
				<!-- Your Page Content Here -->

			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->
	</div>

	<script th:inline="javascript" layout:fragment="script">
		/*<![CDATA[*/
		$(document).ready(function() {
			$("#search-btn-parent").popover({
				trigger : "click"
				,title : "학부형을 선택해주세요"
				,placement : "bottom"
				,content : '<table id="popover-table" class="table table-bordered table-striped dataTable" role="grid" data-height="460"><thead><tr>' +
						'<th data-field="userNm">학부형 이름</th>' +
						'<th data-field="contact">전화번호</th>' +
						'</tr></thead></table>'
				,viewport : "#test1"
				,html : true
			});

			$("#search-btn-parent").on('inserted.bs.popover', function () {
				var popoverId = $(this).attr("aria-describedby");

				$.ajax({
					url : "/rest/admin/parent/list",
					type : "GET",
					headers: {
						'Accept': 'application/json',
						'Content-Type': 'application/json'
					},
					dataType : "JSON",
					success : function (result) {
						var dataTable = $("#" + popoverId).find("#popover-table").DataTable(
							{
								data : result.data
								, columns : [
									{ data : "userNm" }
									, { data : "contact" }
								]
								, paging: true
								, lengthChange: false
								, searching: true
								, ordering: true
								, info: false
								, autoWidth: false
							}
						);

						dataTable.on("selectItems", function( e, dt, items) {
							console.log(items);
						})
					}
				});

			});
		});
		/*]]>*/
	</script>
</body>
</html>